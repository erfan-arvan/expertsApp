<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CS Knowledge Survey</title>
  <style>
    body {font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin: 40px; background-color: #f4f4f4; color: #333;}
    .card {background: #fff; padding: 20px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); margin-bottom: 20px;}
    button {padding: 10px 16px; border: none; border-radius: 8px; font-size: 15px; cursor: pointer;}
    button.primary {background-color: #4CAF50; color: #fff;}
    button.primary:hover {background-color: #45a049;}
    button[disabled] {opacity: .6; cursor: not-allowed;}
    label {display: block; margin: 8px 0;}
    .progress {height: 6px; background: #eee; border-radius: 4px; overflow: hidden; margin-bottom: 8px;}
    .progress span {display: block; height: 100%; background: #4CAF50; width: 0%; transition: width .3s;}
  </style>
</head>
<body>
  <div class="card">
    <h2>CS Knowledge Survey</h2>
    <div class="progress"><span id="bar"></span></div>
    <div id="qtext"></div>
    <div id="opts"></div>
    <div style="margin-top: 20px; display:flex; justify-content: space-between;">
      <button id="prev">Previous</button>
      <button class="primary" id="next">Next</button>
    </div>
  </div>
  <script>
    const topics = [
      {id:'uri', fam:'Are you familiar with URI schemes?', mcq:{q:'Which part of "http://example.com/page.html" is the URI scheme?', opts:['example.com','http','/page.html','://'], ans:1}},
      {id:'fp', fam:'Are you familiar with floating-point singularities in Java?', mcq:{q:'What is 1.0/0.0 in Java?', opts:['NaN','Infinity','0.0','Throws exception'], ans:1}}
    ];
    let state = {i:0, step:'fam', answers:{}};
    const qtext=document.getElementById('qtext');
    const opts=document.getElementById('opts');
    const bar=document.getElementById('bar');
    const prev=document.getElementById('prev');
    const next=document.getElementById('next');

    function render(){
      const t=topics[state.i];
      bar.style.width=`${(state.i/topics.length)*100}%`;
      opts.innerHTML='';
      if(state.step==='fam'){
        qtext.textContent=t.fam;
        const yes=document.createElement('label');
        yes.innerHTML=`<input type='radio' name='f' value='yes' ${state.answers[t.id]?.fam==='yes'?'checked':''}> Yes`;
        const no=document.createElement('label');
        no.innerHTML=`<input type='radio' name='f' value='no' ${state.answers[t.id]?.fam==='no'?'checked':''}> No`;
        opts.append(yes,no);
        next.disabled=!state.answers[t.id]?.fam;
      } else {
        qtext.textContent=t.mcq.q;
        t.mcq.opts.forEach((o,i)=>{
          const l=document.createElement('label');
          const checked=state.answers[t.id]?.mcq===i?'checked':'';
          l.innerHTML=`<input type='radio' name='m' value='${i}' ${checked}> ${o}`;
          opts.append(l);
        });
        next.disabled=state.answers[t.id]?.mcq===undefined;
      }
    }

    opts.addEventListener('change',e=>{
      const t=topics[state.i];
      if(state.step==='fam'){
        state.answers[t.id]={...state.answers[t.id],fam:e.target.value};
      } else {
        state.answers[t.id]={...state.answers[t.id],mcq:parseInt(e.target.value)};
      }
      next.disabled=false;
    });

    next.onclick=()=>{
      const t=topics[state.i];
      if(state.step==='fam'){
        if(state.answers[t.id].fam==='yes') state.step='mcq';
        else {state.i++; state.step='fam';}
      } else {state.i++; state.step='fam';}
      if(state.i>=topics.length){qtext.textContent='Done!';opts.innerHTML='';next.disabled=true;prev.disabled=true;bar.style.width='100%';return;}
      render();
    };
    prev.onclick=()=>{
      if(state.step==='mcq') state.step='fam';
      else if(state.i>0){state.i--;state.step='mcq';}
      render();
    };
    render();
  </script>
</body>
</html>
